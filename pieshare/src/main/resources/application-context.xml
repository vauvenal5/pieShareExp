<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	   xmlns:camel="http://camel.apache.org/schema/spring"
	   xsi:schemaLocation="
       http://www.springframework.org/schema/beans    
       http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://camel.apache.org/schema/spring
       http://camel.apache.org/schema/spring/camel-spring.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd" xmlns:aop="http://www.springframework.org/schema/aop">

	<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" />

	<!-- Controllers -->
	<bean id="pieShareController" class="org.pieshare.pieshare.PieShareController" lazy-init="true">
		<property name="pieService" ref="pieService"/>
		<property name="commandParserService" ref="argparse4jService"/>
	</bean>
	
	

	<!-- Services -->

	<bean id="pieceptionService" class="org.pieshare.pieception.PieceptionService" lazy-init="true">
		<property name="cmdServerService" ref="cmdServerService"/>
		<property name="cmdClientService" ref="cmdClientService"/>
		<property name="pieService" ref="pieService"/>
	</bean>

	<bean id="cmdServerService" class="org.pieshare.pieception.CmdServerService" lazy-init="true">
		<property name="pieService" ref="pieService"/>
	</bean>
	
	<bean id="appDataPropertiesReader" class="org.pieshare.propertiesreader.AppDataPropertiesReader" lazy-init="true">
		<property name="directoryService" ref="directoryService"/>
	</bean>
	
	<bean id="pieUserDatabaseManagementServie" class="org.pieshare.database.PieUserDatabaseManagementService" lazy-init="true">
	</bean>
	
	<bean id="directoryService" class="org.pieshare.common.DirectoryService" lazy-init="true">
	</bean>
	
	<bean id="fileWatcherService" class="org.pieshare.filewatcher.FileWatcherService" lazy-init="true">
		<property name="eventBaseService" ref="eventBaseService"/>
	</bean>

	<bean id="cmdClientService" class="org.pieshare.pieception.CmdClientService" lazy-init="true">
		<property name="pieService" ref="pieService"/>
	</bean>

	<bean id="pieService" class="org.pieshare.pieshare.PieService" lazy-init="true">
		<property name="eventBaseService" ref="eventBaseService"/>
	</bean>

	<bean id="argparse4jService" class="org.pieshare.commandParser.Argparse4jService" lazy-init="true">
		<property name="actionExit" ref="actionExit"/>
		<property name="actionLogin" ref="actionLogin"/>
	</bean>

	<bean id="eventBaseService" class="org.pieshare.event.eventBase.EventBaseService" scope="prototype" lazy-init="true">
	</bean>

	<!-- DAO's -->
	<bean id="testDao" class="org.pieshare.dao.TestDao" lazy-init="true">
		<property name="dataSource" ref="dataSource"/>
	</bean>

	<!-- Actions -->
	<bean id="actionExit" class="org.pieshare.commandParser.ActionExit" lazy-init="true">
		<property name="pieceptionService" ref="pieceptionService"/>
	</bean>

	<bean id="actionLogin" class="org.pieshare.commandParser.ActionLogin" lazy-init="true">
		<property name="pieceptionService" ref="pieceptionService"/>
	</bean>

	<!-- Views -->

	<!-- Other Beans -->	
	<bean id="dataSource" destroy-method="close" class="org.pieshare.database.PieAppDB" lazy-init="true">
		<property name="driverClassName" value="org.sqlite.JDBC"/>
		<property name="url" value="jdbc:sqlite:test.db"/>
	</bean>
</beans>